采用分层结构, 根目录为`/`

## 概念

#### 文件

**文件类型**
可以使用`ls -l`显示文件列表查看第一个字母, 共7类
1. - : 普通
2. d : 目录文件
3. b : 块设备文件
4. c : 字符设备文件
5. l : 符号链接文件
6. p : 命名管道文件
7. s : 套接字文件

**文件名**
- 除 / 以外的所有字符
- 长度不超过255
- 同一目录不能有同名文件
- 第一个字符为`.` , 说明为隐藏文件
- 不规定拓展名
- 区分大小写

#### 目录

**特殊目录**
- `.` -> 当前目录
- `..` -> 上级目录
- `~` -> 当前用户家目录/主目录

**路径**
- 以 目录名组成, / 分隔的字符串 
- 绝对路径 : 从根目录 / 开始
- 相对路径 : 从当前目录或者相关的定位符开始, 如 ../java

## 命令

### 操作命令

**pwd**
打印当前工作目录绝对路径

**cd**
切换目录
只写cd效果类似cd ~
- `.` 切换到当前目录
- `..` 切换到上级目录
- `~` 切换到用户家目录

#### ls
列出参数的属性信息
**格式**
`ls [选项] [参数]`
**参数**
- -l 当前目录详细信息
- -a 当前目录下所有文件
- -i 显示文件的inode编号
- -R 递归显示, 包括显示子目录下文件信息
- `-d` 显示目录的详细信息

**touch**
更新文件时间戳, 或者创建新文件

**mkdir**
创建目录
参数 -p : 递归创建目录 (允许书写 /a/b/c 的形式创建目录)

#### cp
将一个**或多个**源文件复制到指定目录
**格式**
`cp [选项] 源文件1 源文件2 ... 目标目录`
**参数**
- -R : 递归处理 (允许复制含有文件的文件夹)
- -f : 强制复制文件或目录

#### rm
删除指定文件或目录
**格式**
`rm [选项] 文件或目录`
**选项**
- -f : 强制删除文件或目录
- -i : 删除前询问
- -rf : 强制且递归删除所有文件以及子目录, 删除前不询问

**mv**
移动文件或目录(同时还可以实现改名)
格式: `mv 源文件 目标目录`

**rmdir**
删除目录
参数-p : 递归删除

### 查看命令

**cat**
打印文件内容

**more**
分页显示文件内容
![[课程/Unix/Inbox/Pasted image 20240428141930.png]]

**less** -> 比more更好
分页显示文件内容
**可以向上翻页**
![[课程/Unix/Inbox/Pasted image 20240428141958.png]]

#### head
查看前n**行**
**格式**
`head -n [参数] 文件名`
**关于-n**
- 如果参数为**正**, 那么为显示文件的前n行
- 如果参数为**负**, 那么为不显示后n行, 其余都显示

#### tail
查看后n**行**
**格式**
`tail -n [参数] 文件名`
**关于-n**
- 如果正常参数, 表示显示后n行
- 如果在参数前加入 `+` , 表示显示**从第n行开始**的所有行

**提示**
head和tail通过**管道**混用可以实现显示任意行的功能
`head -n 20 a.txt | tail -n 10` -> 显示第11行到第20行
**解释** : 将前20行传入tail, 再由tail显示前20行的后10行, 即为11行到20行

#### wc
计算文件字节数, 字数和行数
**格式** `wc [选项] 参数`
**参数**
- -c : 统计字节数
- -w : 统计字数
- -l : 统计行数

### 搜索命令

**which**
查看**命令**所在地址
格式 `which 命令名` -> 如 `which ls`

#### find
功能: 借助搜索关键字查找**文件或目录**
**命令格式**: `find 搜索路径 [选项] 搜索关键词`
示例 : `find /etc -name passwd`

**选项**
- -amin : 按文件**访问时间**查找文件, -n为n**分钟**以内, +n为n**分钟**以前
- -atime : 类似-amin, 但是**单位为天**
- -cmin : 根据文件修改(文件的属性或内容的修改)来查找(**按分钟**)
	- 写文件, 更新所有者, 权限, 设置连接都视为**状态更新**
- -ctime : 类似-cmin, 但是按**天**
- -mtime: 根据**文件内容**(只针对内容)的修改来查找文件
- -mmin : 类似于-mtime
- -newer : 查找比某个文件更新时间更近的文件
- -type 根据文件类型查找
- -exec : 对查到的文件执行linux命令, **执行前不询问**
	- 格式: `-exec 命令 {} \;`
- -ok : 类似-exec, 但是**执行前询问**
- -print : 打印出查找到的符合条件的文件
- -fprint : 将查找内容输出到文件中
- -ls : 使用ls格式列出
- -follow : 不包括符号链接
- -uid : 查找指定用户的文件 (以用户id查找)
- -gid : 根据组id查找文件
- -user : 根据用户名查找文件
- -group : 根据组名查找文件
- -name : 根据文件名查找
- -size : 根据文件大小查找
	- +n : 大于n
	- n : 等于n
	- -n : 小于n
	- 单位分别为c, k, M, G -> 字节, 千字节, 兆, G字节
	- 不加单位以块为单位, 1块 = 512字节
- -empty : 空文件或目录
- -perm : 根据文件权限查找
- -a : 前后条件都满足(and)
- -o : 满足一个条件即可(or)
	- 多个条件时, 应该使用圆括号括起来
	- 圆括号使用时应该加转义符`\( \)`
- ! : 不满足条件时查找成功

#### locate
借助**搜索关键字**查找文件或目录
**格式** : `locate [选项] 关键字`
**与find 的区别**
- locate速度远比find快, 因为locate借助了索引文件进行搜索, 索引文件中没有的便无法查到, 而已删除的文件如果索引文件中显示存在, 那么也可以被错误的查找到。
- 使用updatedb命令**更新**索引

#### grep
在文件中全局查找
在文件中搜索匹配的**行**并输出
输入流可以是标准输入流, 管道和文件
**格式**  : `grep 指定字符/正则表达式 源文件`
**示例** : 
- `grep user /etc/passwd`
- `ps | grep sshd` -> 查找是否运行了sshd进程

**退出状态**
- 找到匹配表达式 -> 返回状态为0
- 没找到匹配表达式 -> 返回状态为1
- 找不到指定文件 -> 返回状态为2

**选项**
- -i : 忽略字符大小写
- -q : 不输出任何信息
- -n : 显示匹配字符串**所在行号**
- -c : 显示**成功匹配的行数**
- -v : 显示**不匹配的行**
- --color : .bashrc或.bash_profile中加入alias grep=grep -color=auto, 生效后grep结果自动高亮匹配

# 权限

## 概念

**文件的访问权限**
- 读(r) : 允许读文件内容
- 写(w) : 允许向文件中写内容
- 执行(x) : 允许将文件作为程序执行

根据权限, Linux中将用户分为
- 文件拥有者
- 同组用户
- 其他组用户
- 全部用户
且根据用户对文件的权限, 将用户权限分为读, 写, 运行权限

**目录必须有x权限, 否则无法查看其中内容**

文件权限也可以使用数字来表示
- 读权限: 4
- 写权限: 2
- 执行权限 : 1
不同的用户组拥有的权限是这些单个权限值的加和

## 管理
使用权限管理, 用户要具有root权限

#### chmod
变更文件或目录的权限
格式: **`chmod {augo}{+-=} 文件或目录`**
示例 : chmod u+w file1
- 为file1添加写权限
- + : 添加
- - : 删除
- = : 直接设置

**chown**
改变文件或目录的拥有者
**格式** `chown 用户 文件或目录`
参数 -R : 递归处理, 包括所有文件及其子目录

**chgrp**
改变用户所属组

## 特殊权限

文件特殊权限共有3种
- SUID(s) : 出现在文件所有者的x权限上
	- 对于**可执行二进制文件**, 通过该权限让普通用户临时具有**文件所有者**的身份
	- 在原3位权限上加4
- SGID(s) : 出现在用户组的x权限上
	- 对于**文件**, 使普通用户临时拥有用户组身份
	- 对于**目录**, 使任何用户在该目录新建的**目录或文件**的所属组与该目录的所属组一致
	- 在原3位权限加2
	- 该文件只有s权限显示为**大S**
	- 同时有s和x显示为**小s**
- SBIT(t) : 出现在目录的x权限上
	- **只针对目录** , 防止其他用户(除root)删除该目录下的**自己的文件**
	- 只有自己和root才有权利删除该目录中的**自己创建的文件**
	- 在原3位权限加1

# 压解压缩
Linux中压缩包的后缀有`.zip, .gz, .bz2, .xz`等, 后缀不同, 压缩方法不同, 解压方法也不同

对于`.zip, .gz, .bz2, .xz`后缀
**生成压缩包命令**分别为
- zip
- gzip
- bzip2
- xz
**解压命令**分别为
- unzip
- gunzip
- bzip2
- xz

同时, Linux提供了专门的打包解包命令**tar**
#### tar
功能 : 打包多个目录或文件, 通常配合压缩命令或解压命令
**格式** : `tar [选项] 目录`
- -c : 打包
- -v : 打包时显示详细信息
- -f : 指定打包后的文件名/要解包的文件名
- -z : 打包/解包 gz形式的压缩包
- -x : 解包
- -C : 执行解压的目标目录
- -j: 打包/解包 bz2形式的压缩包

**zip/unzip**
以.zip格式压缩文件, 压缩后**保存源文件**
格式: `zip [-r] [压缩后文件名] 文件或目录`
**选项**
- -j : 只保留文件名称及其内容, 不存放任何目录名称
- -m : 压缩后**删除源文件**
- -o : 以压缩文件中**最新更新时间**为准更新压缩文件的更改时间
- -r: 参数为目录时, 递归处理子目录

**gzip/gunzip**
获得.gz格式压缩包, **不保留源文件**
若同时列出多个文件, 每个文件会单独被压缩
**格式**
`gzip [选项] 文件名`
`gunzip [选项] 压缩包名`

**bzip2/bunzip2**
获得.bz2格式压缩包, 使用**选项-k保留源文件**
**格式**
`bzip2 [选项] 文件名`
- 使用bzip2并使用-d选项也可以实现解压
`bunzip2 [选项] 压缩包名`









