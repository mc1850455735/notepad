
# 页面缓存
页面信息提前存入redis缓存中

**为商品列表页添加缓存**
1. 修改注解
```java
@RequestMapping(value = "/toList", produces = "text/html;charset=utf-8")  
@ResponseBody
```
2. 注入redis
```java
@Autowired  
private RedisTemplate redisTemplate;
```
3. 如果缓存中没有对应的页面, 则手动渲染
	1. 注入对应的bean
	2. 使用`thymeleafViewResolver.getTemplateEngine().process`创建渲染
	3. 使用`webContext`
```java
WebContext webContext = new WebContext(request,response,request.getServletContext(),request.getLocale(),  
        model.asMap());  
html = thymeleafViewResolver.getTemplateEngine().process("goodsList", webContext);  
if(!StringUtils.isEmpty(html)){  
    // 存入redis, 加失效时间  
    valueOperations.set("goodsList", html, 60, TimeUnit.MINUTES);  
}
```

**为商品详情页添加缓存**
同上


# 对象缓存
无

# 页面静态化

将不会改变的数据作为静态数据, 减少需要传输的数据量

# 解决超卖

1. 修改减库存操作
2. 确保一个人只能强到一件商品
	1. 把用户id和商品id绑成一个唯一的**索引**
	2. 在秒杀订单中
3. 通过redis提升性能
	1. 把order存入redis中
	2. 在seckill中使用redis获取订单信息

# 总结

**缓存**
1. 页面缓存
2. url缓存 (url不一样的页面缓存)
3. 对象缓存

**静态化**
1. 商品列表
2. 商品详情
3. 订单详情



