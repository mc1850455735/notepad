- 减少数据库的访问
- 增强数据库

# 使用rabbitmq

## 交换机

#### fanout广播模式

并不会处理路由键, 只是将交换机简单的绑定到队列中
由于不需要处理路由键, 速度最快

#### direct

路由键: 决定前往的队列, 通过路由键进行匹配
所有到direct中的消息, 都将被转发到路由键, 再由路由键进行发送
默认的交换机就是direct模式
路由键连接到不同的队列
一个都匹配不到, 默认会丢弃这条消息

#### topic模式

> 可以理解为direct模式的拓展

当交换机很多时, 路由键的数量会大量增加, 导致难以管理, 故引入topic模式
通过topic, 可以使用通配符进行模糊匹配
使用`.`分隔各个单词
`*`精确匹配一个单词, `#`匹配0个或者多个单词
如果一个消息可以被两个模糊匹配捕捉到, 如果指向两个不同的队列, 则分别发送; 如果指向同一个队列, 则只发送一次(即使两个都匹配)
一个都匹配不到, 默认会丢弃这条消息

# 预减库存

1. implement
2. 初始化将库存存入redis
3. 用户判断库存时直接使用redis, 不访问数据库
4. 下单时再访问数据库

# rebbitmq下单

1. pojo新建秒杀消息类
2. config配置rabbitmq
3. seckillController通过redis判断重复
4. rabbitmq发送订单信息
5. mqreceive接收订单信息
6. 添加map做预判断

# 排队处理

1. 在详情页添加getResult函数
2. 该函数调用seckillController中的新建getResult函数
3. 在SeckillOrderService中新建getResult函数
4. 函数中使用Wrapper查询订单是否存在, 如果存在, 说明订单成功
5. 使用redis中的hasKey函数检查isStockEmpty键是否存在
6. 在orderService中的seckill函数中设置stockEmpty键
	1. 注意第一个redisTemplate使用ctrl+alt+v时要替换全部
7. 回到html中, 补充getResult函数

# redis的额外优化

1. 

