
# 验证码的作用

- 防止机器自动注册攻击服务器

# 常见验证码工具依赖

## hutool-captcha

[概述 (hutool.cn)](https://www.hutool.cn/docs/#/captcha/%E6%A6%82%E8%BF%B0)
[Gitee仓库](https://gitee.com/dromara/hutool/tree/v5-master/hutool-captcha)
[API文档](https://apidoc.gitee.com/dromara/hutool/)

依赖信息
```xml
<dependency>  
    <groupId>cn.hutool</groupId>  
    <artifactId>hutool-captcha</artifactId>  
    <version>5.8.6</version>  
</dependency>
```

# 基本使用

```java
// 创造图片的字节输出流  
ServletOutputStream os = response.getOutputStream();  
// 获取验证码  
LineCaptcha lineCaptcha = CaptchaUtil.createLineCaptcha(100, 50, 4, 50);  
// 获取对应的验证码
String code = lineCaptcha.getCode();  
// 获取session, 以保存验证码数据
HttpSession session = request.getSession();  
// 将验证码写入Servlet输出流
lineCaptcha.write(os);  
// 设置属性
session.setAttribute("code", code);
```

# 解决浏览器缓存

**问题**
浏览器缓存会使重新请求图片的代码无效, 因为路径相同.

**解决**
在请求路径上添加时间戳, 避免路径的一致

**示例**
```js
let number = new Date().getMilliseconds();  
checkCodeImg.src="/brand-demo/checkCodeServlet?" + number;
```









