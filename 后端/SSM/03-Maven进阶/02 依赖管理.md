# 依赖传递

### 依赖的概念

- 依赖指当前项目运行所需要的jar, 一个项目可以设置多个依赖
- 格式
```java
<dependencies>  
    <dependency>  
        <groupId>top.majinliang</groupId>  
        <artifactId>maven_03_pojo</artifactId>  
        <version>1.0-SNAPSHOT</version>  
    </dependency>
    ...
</dependencies>
```

### 依赖的传递性
- 如果依赖的资源中依赖了额外的资源, 在工程中可以直接使用依赖的依赖
- **直接依赖** : 当前项目中基于依赖配置建立的依赖关系
- **间接依赖** : 被依赖的资源如果依赖于其他的依赖, 当前项目间接依赖其他资源

### 依赖冲突
当依赖中, 如果同一个坐标写了多次, 就会出现依赖冲突问题

##### 优先级
- 路径优先: 当依赖中出现相同的资源时 -> **层级**越深, 优先级越低; 层级越浅, 优先级越高
- 声明优先: 当资源在**相同层级**被依赖时 -> 配置**顺序靠前**的覆盖配置顺序靠后的
- 特殊优先: 当同级配置了相同资源的不同版本 -> 后配置的**覆盖**先配置的

##### 依赖关系展示
IDEA中, `Show Dependencies` 按钮可以用来展示依赖的关系和深度 (快捷键Ctrl + Shift + Alt + U)
![[后端/SSM/03-Maven进阶/Inbox/Pasted image 20250806205849.png]]

# 可选依赖和排除依赖

### 可选依赖
- 可选依赖是隐藏当前工程所依赖的资源, 隐藏后对应资源将**不具有**依赖传递性 -> 自己的依赖不展示给其他人 (**不透明**)
- 将依赖中的 `optional` 设置为 `true`
```xml
<dependency>  
    <groupId>top.majinliang</groupId>  
    <artifactId>maven_03_pojo</artifactId>  
    <version>1.0-SNAPSHOT</version>  
    <optional>true</optional>  
</dependency>
```

### 排除依赖
- 排除依赖指的是在当前引用的坐标中将它的依赖从依赖关系中去除, **隐藏**当前资源对应的依赖关系 -> 不想要别的的依赖 (**不需要**)
- 排除依赖**不需要**指定版本
```xml
<dependency>  
    <groupId>top.majinliang</groupId>  
    <artifactId>maven_04_dao</artifactId>  
    <version>1.0-SNAPSHOT</version>  
    <exclusions>        
		    <exclusion>            
				    <groupId>log4j</groupId>  
            <artifactId>log4j</artifactId>  
        </exclusion>    
    </exclusions>
</dependency>
```
