# 整合JUnit

- 当没有选用Springboot的其他起步依赖时, Springboot会添加一个默认起步依赖到程序中
```xml
<dependency>  
   <groupId>org.springframework.boot</groupId>  
   <artifactId>spring-boot-starter</artifactId>  
</dependency>
```

**测试类定义及其原理**
- SpringBoot中, 使用注解`@SpringBootTest`来标志该类为一个测试类, 通过该注解加载JUnit的SpringBoot启动类
- 测试类中的任意方法加注解`@Test`, 即可标明该方法为一个测试方法
- `@SpringBootTest`注解中, 既包含了一个通用的运行器, 同时还加载了SpringBoot的配置文件
	- SpringBoot中, 通过注解`@SpringBootApplication`标志一个类为Springboot程序的入口(引导类)
	- 该类同样起配置类的作用, 其会扫描该类所在的包及其自包, 将其中的bean加载到配置中
- `@SpringBootTest`会默认加载上述引导类, 要求测试类的包路径必须与引导类相同或在其对应的子包内, 否则无法找到引导类作为配置文件
- 如果需要更换指定配置文件, 则可以使用 `@SpringBootTest(classes = 配置文件名.class)` 进行指定
```java
@SpringBootTest(classes = Springboot07TestApplication.class)  
class Springboot07TestApplicationTests {
    ...
}
```

# SSM整合

### 整合MyBatis

- Spring整合MyBatis
	- SpringConfig
		- 导入JdbcConfig
		- 导入MyBatisConfig
	- JDBCConfig
		- 定义数据源, 加载properties配置项
	- MyBatisConfig
		- 定义SqlSessionFactoryBean
		- 定义映射配置 MapperScannerConfigurer
- SpringBoot整合MyBatis
	- 在创建项目时加入`MyBatis`和`MySQL Driver`相关依赖
	- 构建项目组织, 创建yaml配置文件
	- 对于使用Mybatis自动代理的Dao文件, 使用 **注解`@Mapper`** 提醒SpringBoot对其扫描 (自动代理不需要书写 `@Repository` )
- 注意: 2.4.2及以前的版本, 数据库url需要说明时区
```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ssm_db
    username: root
    password: 123456
```
```java
@Mapper  
public interface BookDao {  
    ...
}
```

### 配置Druid数据源

- 导入Druid依赖包, 刷新Maven
- 在yaml配置中, 设置type为DruidDataSource

```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ssm_db
    username: root
    password: 123456
    type: com.alibaba.druid.pool.DruidDataSource
```

### 案例

- 添加必要的依赖坐标
- 对自动代理的dao添加`@Mapper`进行扫描
- 异常处理、Controller、Service等与Spring无异
- 将jdbc.properties中的配置信息转移到application.yml中
- 将网页静态资源等放置在resources/static目录下
	- 静态资源不再需要额外配置路径信息, 直接放在该目录即可
	- static下的index.html为输入当前网址自动跳到的页面
	- index.html中可以通过脚本直接跳转到某个网页
```html
<script>
    document.location.href="pages/books.html"
</script>
```
