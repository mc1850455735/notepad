## 概述

1. 概念 - 约束是作用于表中字段上的规则, 用于限制存储在表中的数据
2. 目的 - 保证数据库中数据的正确, 有效性和完整性
3. 分类
![[Pasted image 20221218235346.png]]
自动增长 - `auto_increment`

注意: 约束时作用于表中字段上的,  可以在创建表/修改表的时候添加约束

## 外键约束

用来让两张表之间建立连接从而**保证数据的一致性和完整性**

具有外键的表是**子表** , 外键所关联的表是**父表**

语法

#### 添加外键约束
- 创建表时添加外键约束
```mysql
CREATE TABLE 表名(
	字段名 数据类型;
	...
	[CONSTRAINT] [外键名称] FOREIGN KEY (外键字段名) 主表(主表列名);
)
```
- 对已存在的表添加外键约束
```MYSQL
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名);
```

#### 删除外键约束

```MYSQL
ALTER TABLE 表名 DROP CONSTRAINT 外键名称;
```

#### 删除 / 更新行为

- **`NO ACTION`** - 当在父表中删除/更新对应记录时, 首先检查该记录是否有对应外键, 如果有则不允许删除 / 更新 (与`RESTRICT`一致)
- **`RESTRICT`** - 当在父表中删除/更新对应记录时, 首先检查该记录是否有对应外键, 如果有则不允许删除 / 更新 (与`NO ACTION`一致)
- **`CASCADE`** - 当在父表中删除/更新对应记录时, 首先检查该记录是否有对应外键, 如果有, 则也删除 / 更新外键在子表中的记录
- **`SET NULL`** - 当在父表中删除对应记录时, 首先检查该记录是否有对应外键, 如果有则设置子表中该外键值为null (这就要求该外键允许取null)
- **`SET DEFAULT`** - 父表有变更时, 子表将外键列设置成一个默认的值(Innodb不支持)

语句
```mysql
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名 (主表字段名) ON UPDATE CASCADE ON DELETE CASCADE;
```

