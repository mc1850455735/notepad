- 当键盘中按键数量较多时, 为了减少IO口的占用, 通常将按键排列成为矩阵形式
- 采用逐行及逐列的扫描, 可以读出任意位置按键的状态
- 单片机的IO口既可以作为输入, 也可以作为输出
	- 弱上拉, 强下拉, 即输出1的能力弱, 输出0的能力强
- 当P1被置为0时, 此时为输出模式, 端口的位不随按键的状态而改变
- 当P1被置为1时, 此时为输入模式,不输入时为1, 输入时为0

**代码示例**
```c
unsigned char getMatrixKey(void) {
	unsigned char keyNum = -1;
	
	P1 = 0x0F;
	if(P1 != 0x0F) {
		DelayXms(20);
		if(P1 != 0x0F) {
			P1 = 0x0F;
			switch(P1) {
				case 0x07: keyNum = 0;break;
				case 0x0B: keyNum = 1;break;
				case 0x0D: keyNum = 2;break;
				case 0x0E: keyNum = 3;break;
			}
			
			P1 = 0xF0;
			switch(P1) {
				case 0x70: keyNum += 0;break;
				case 0xB0: keyNum += 4;break;
				case 0xD0: keyNum += 8;break;
				case 0xE0: keyNum += 12;break;
			}
			
			// 松手检测
			while(P1 != 0xF0);
			DelayXms(20);
		}
	}
	return keyNum;
}
```

**电路图**
![[硬件/STC89C51/Inbox/Pasted image 20250412222343.png]]


