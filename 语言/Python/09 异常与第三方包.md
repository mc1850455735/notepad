
# 异常

- 导致Python无法正常执行的错误叫做异常

## 异常捕获

**作用**
- 提前假设某处可能出现异常, 做好提前准备, 出现异常时拥有对应的处理

1. 捕获基本异常
```python
try:
	异常代码
except:
	出现异常执行的代码
```
2. 捕获指定异常
```python
try:
	异常代码
except 异常类型:
	处理异常
```
3. 捕获多个异常
   - 通过元组包含这些异常
```python
try:
	异常代码
except (异常1,异常2,...):
	处理异常
```
4. 捕获全部异常(正规写法)
   - 所以异常类型都基于Exception继承
```python
try:  
    1/0  
except Exception as e:  
    print("happen error")
```

## 异常else
- else可选写或者不写
- 如果没有出现异常, 执行else

```python
try:
	异常代码
except 异常类型:
	异常处理
else:
	异常未发生的动作
```

## 异常finally
- finally可选写或者不写
- 不管有没有出现异常, 都执行finally
	- 一般用于资源的关闭

```python
try:  
    异常代码  
except 异常类型:  
    异常处理  
finally:  
    结束处理代码
```

## 异常总结
```python
try:
	可能发生异常语句
except [异常 as 别名]:
	出现异常处理语句
[else:]
	未出现异常的处理
[finally:]
	不管有没有异常都会做
```

## 异常的传递

- 程序的异常具有传递性
- 如果一个异常往上传的过程中没有任何一个函数接收, 那么程序就会报错
- 只需要在合适的位置捕获异常, 不需要到最底层捕获

**示例**
```python
# 出现异常的方法
def func1():
    print("func1 exec")
    num = 1 / 0
    print('func1 end')
# 无异常方法调用异常方法
def func2():
    print("func2 exec")
    func1()
    print('func2 end')
# 主方法调用无异常方法
def main():
	try:
	    func2()
	except Exception as e:
		print(e)
main()
```

# Python模块

- Python**模块**, 是一个Python文件 , 以.py结尾, 内晗类, 函数, 变量等
- 模块作用 : 帮助快速实现一些功能
	- 可以认为每个模块就是一个工具包

## 导入方式
`[from 模块名] import [模块|类|变量|函数|*] [as 别名]`

- 模块导入一般写在文件**开头位置**

**常用组合形式**
- import 模块名
- from 模块名 import 类,变量,方法等
- from 模块名 import *
- import 模块名 as 别名
- from 模块名 import 功能名 as 别名

**使用**
1. `import 模块名1, 模块名2`
  - `模块名.功能名` : 调用模块中的函数, 类等
  - 可以使用Ctrl + 单击 查看包的实现代码
2. `from 模块名 import 功能名`
   - `功能名` : 通过from导功能名就可以直接调用功能名
3. `from 模块名 import *`
   - `功能名` : 可以直接调用包中的所有功能
   - 导入模块中所有功能
4. `import 模块名 as 别名`
   - `import time as t`

## 自定义模块

- 每个python文件都可以作为一个模块
- 模块名称是文件的名字

### 不同模块的同名功能

- 对于不同模块中相同名称的功能**同时导入**时, 后一个导入的模块会**覆盖掉**前一个模块

### main函数

- 模块导入时, 会自动执行模块中所有的可执行代码, 所以必须使用main方法避免语句的自动执行
- 右键运行时, `__name__`会被自动设置称为`__main__`
- 通过import调用时, `__name__`会被自动设置为**包名**

**示例**
```python
if __name__ == '__main__':
	主函数代码
```

### `__all__`变量

- 如果一个模块中有`__all__`变量 , 当使用`from xxx import *`时, 不会导入全部功能, 只能导入这个列表中的元素
- 该变量应该写在模块文件的文件头
- 该变量只会限制通过`*`的导入, 不会限制直接根据功能名的导入

**示例**
```python
__all__ = ['test_a']
```

# Python包

- 从**物理**上看, python包就是一个文件夹, 该文件夹下包含一个`_init_.py`文件, 该文件夹可以用于包含多个模块文件
	- python包必须含有`_init_.py`文件, 否则就只是一个普通的文件夹
- 从**逻辑**上看, 包的本质依然是模块

**作用**
- 当模块文件越来越多时, 包可以帮助管理模块, 但是包的本质依然是模块

**步骤**
1. 可以通过Pycharm快速创建包结构
2. 通过调用模块的方式就可以调用包
   - `import 包名.模块名`
   - `包名.模块名.目标`
**示例**
```python
import my_package.my_module1
from my_package import my_module1
from my_package.my_module1 import info_print1
```

**注意**
- 可以在`__init__.py`中使用`__all__=[]`控制允许导入的模块
- 控制的同样是使用`from my_package import *`导入的内容

## 第三方包导入

**一些常用的第三方包**
- numpy : 科学计算
- pandas : 数据分析
- pyspark, apache-flink : 大数据计算
- matplotlib, pyecharts : 图形可视化
- tensorflow : 人工智能

### 第三方包安装

**在cmd中**
- 输入
	- `pip install 包名称`
- 修改镜像源 : 使用清华源
	- `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple 包名称`
- 第三方包使用
	- `import 第三方包名`

**pycharm**
- `Python interpreter` -> `Interperter Settings` -> 通过+号搜索安装
- 可以在option中添加`-i https://pypi.tuna.tsinghua.edu.cn/simple`使用国内源




