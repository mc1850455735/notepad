## API的使用

###### 什么是API
API(Application Programming Interface) : 应用程序编程接口
Java API : JDK提供的Java中已经写好的类, 直接使用即可

###### 目前已经学过的API
- Scanner : 键盘录入
- Random : 随机数
不需要关心是如何实现的,  只需要关心怎么用就可以(当然如果能知道是如何实现的就更好了)

###### API帮助文档
- java.io : 读取和写入文件
- java.lang : 利用java进行程序设计的基础类

## String概述

1. java.lang.String类代表字符串,  lang是java的核心包,  使用时不需要导包
2. Java中所有的字符串文字都是此类对象
3. 字符串的值在创建后不可更改

## String的创建方法

![[语言/Java/Inbox/Pasted image 20221209192500.png]]

1. 直接赋值 ( 如String name = "abc123"; )
2. 创造空白字符串
3. 传入字符串来创造字符串 - 脱裤子放屁
4. 传入字符数组来创造字符串 (有用)
5. 传入字节数组来创造字符串 (有用)

###### 字符串在内存当中

![[语言/Java/Inbox/Pasted image 20221209195156.png]]

###### StringTable串池
串池中会创建代码需要的字符串, 然后将字符串的地址赋值给String对象
当有重复字符串时, 不会重复创建

![[语言/Java/Inbox/Pasted image 20221209195710.png]]

###### 直接赋值 与 new创建 的区别
在使用new时, 会在堆内存中开辟一块空间, 存储String对应的字符数组, 然后把字符数组转换成为String里的字符串

当重复new了两个一样的字符串时, 会在堆中创建两个相同的字符串, 二者会指向堆内存中的不同地址, 从而造成了内存资源的浪费

所以, 使用直接赋值的方式更能够节约内存.

###### Scanner录入字符串
对于使用Scanner录入的字符串,  查看源码,  可以得知,  其本质还是使用new创建的字符串.

**Scanner的两套体系**
*两套体系尽量不要混用*

- 第一套体系: 遇到空字符就停止
>nextInt();
>nextDouble();
>next();

- 第二套体系: 遇到换行符才会停止
>nextLine();

## String的比较

###### 对于 == 号
- 基本数据类型 : 数据值
- 引用数据类型 : 地址值

###### 字符串比较
- boolean equals() - 完全一样结果是true, 否则是false
- boolean equalsIgnoreCase() - 忽略大小写

###### 结论
以后只要想比较字符串的内容,  就必须使用String里面的方法

## String的使用

###### 遍历字符串
1. public char charAt(int index) : 根据索引返回字符
2. public int length() : 返回此字符串的长度

**使用charAt()进行遍历的一个示例**
![[语言/Java/Inbox/Pasted image 20221210111134.png]]

###### 字符串截取

>String substring( int beginIndex, int endIndex );
>	截取 从beginIndex 到 endIndex
>	包头不包尾,  包左不包右
>	返回值是截取的小串

>String substring( int beginIndex );
>	从 beginIndex 到末尾

###### 字符串替换
- String replace(旧值, 新值);
	- 返回值是替换后的结果

###### 拆分字符串成为字符数组
- char[] toCharArray(String str);

## StringBuilder

**概述**
StringBuilder可以看作一个容器, 创建后里面的内容是可变的.

**作用**
可以提高字符串的操作效率

**使用StringBuilder的常见场景**
1. 字符串的拼接
2. 字符串的反转

---
###### StringBuilder构造方法

- public StringBuilder()  创建一个空白可变子字符串对象,  不含有任何内容
- public StringBuilder("abc") 根据字符串的内容创建可变字符串对象

###### StringBuilder常用方法

- public StringBuilder append(任意类型) - 添加数据,  返回自身
- public StringBuilder reverse() - 反转容器中的内容
- public int length() - 返回StringBuilder类的长度 ( 字符出现的个数 )
- public String toString() - 通过toString()将StringBuilder转化为String

---
######  关于Java自带的容器类的打印

由于StringBuilder是Java已经写好的类,  java对他**在底层**做了一些特殊处理,  打印对象不是地址值而始属性值

## StringJoiner

**概述**
与StringBuilder一样, 都是一种容器, 创建以后里面的内容是可变的

**作用**
提高字符串的操作效率,  使得代码编写更加简洁

---
###### StringJoiner的构造方法
*StringJoiner没有默认构造方法*

- public StringJoiner(间隔符号) - 创建一个StringJoiner对象,  指定拼接时的间隔符号
- public StringJoiner(间隔符号, 开始符号, 结束符号) - 创建一个StringJoiner对象,  指定拼接时的间隔符号, 开始符号, 结束符号

---
###### StringJoiner的成员方法

- public StringJoiner add(添加的内容) - 添加数据, 并返回对象本身
- public int length() - 返回长度(字符的个数)
- public String toString() - 返回一个字符串(该字符串就是拼接后的结果)


## 字符串原理

###### 字符串拼接的底层原理

1. **拼接时没有变量参与**
	在编译时, 触发字符串优化机制, 编译后就已经是最终结果了
	![[语言/Java/Inbox/Pasted image 20221210215451.png]]

2. **拼接时有变量**

 **JDK8以前**使用StringBuilder来进行拼接
![[语言/Java/Inbox/Pasted image 20221210220448.png]]

拼接过程
![[语言/Java/Inbox/Pasted image 20221210221233.png]]

**JDK8 以后**
先预估字符串大小, 创建一个数组, 然后将要拼接的字符串转移到数组中, 最后进行拼接.

**总结**
![[语言/Java/Inbox/Pasted image 20221210222145.png]]

![[语言/Java/Inbox/Pasted image 20221210222446.png]]

所以, 拼接字符串时, **尽量使用StringBuilder类**

---
######  StringBuilder提高拼接效率的底层原理

StringBuilder是一个内容可变的字符串容器, 而且**不会**被撑爆

StringBuilder的默认容量是16
- 容量和长度是有区别的, 长度是已经储存的数据, 容量是可以储存的数据

当容量不足时, 会扩容 - 新容量 = 老容量 * 2 + 2 
如果一次性添加的数据长于默认扩容的数量, 则长度以实际长度为准

